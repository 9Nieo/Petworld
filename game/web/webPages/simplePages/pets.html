<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="navigation.pets">PetWorld - My Pets</title>
    <link rel="stylesheet" href="../../css/simplePages/pets.css">
    <!-- Include card styles -->
    <link rel="stylesheet" href="../../css/other/petCard.css">
    <!-- Add wallet header styles -->
    <link rel="stylesheet" href="../../css/common/walletHeader.css">
    <!-- Disable source map loading script -->
    <script>
        // Disable source map loading
        window.process = { env: { NODE_DEBUG: false } };
        window.global = window;
    </script>
</head>
<body>
    <div class="app-container">
        <header class="app-header">
            <div class="header-left">
                <a href="./home.html" class="back-btn">
                    <span class="back-icon">&#8592;</span>
                    <span data-i18n="button.back">Back</span>
                </a>
                <h1 class="app-title" data-i18n="navigation.pets">My Pets</h1>
            </div>
            
            <div class="wallet-info">
                <span id="walletAddress" data-i18n="wallet.noWallet">No Wallet Connected</span>
                <button id="connectWalletBtn" class="wallet-btn" data-i18n="wallet.connect">Connect Wallet</button>
            </div>
        </header>
        
        <main class="app-content">
            <div class="pet-container">
                <div class="section-header">
                    <div class="batch-actions">
                        <button id="feedAllPetsBtn" class="batch-action-btn feed-all-btn">
                            <i>üçñ</i> <span data-i18n="pets.feedAll">Feed All Pets</span>
                        </button>
                        <button id="claimAllRewardsBtn" class="batch-action-btn claim-all-btn">
                            <i>üéÅ</i> <span data-i18n="pets.claimAll">Claim All Rewards</span>
                        </button>
                    </div>
                    <div class="actions">
                        <button id="feedFriendNFTBtn" class="feed-friend-btn">
                            <i>üçñ</i> <span data-i18n="pets.feedFriend">Feed Friend's NFT</span>
                        </button>
                    </div>
                </div>
                
                <div class="pet-grid">
                    <!-- Pet cards will be dynamically generated by JavaScript -->
                    <div class="loading-indicator">Loading pet data...</div>
                </div>
            </div>
        </main>
        
        <footer class="app-footer">
            <!-- Footer content will be dynamically generated by CommonFooter component -->
        </footer>
    </div>
    
    <!-- Wallet connection iframe -->
    <iframe id="walletFrame" src="../../webPages/wallets/wallets.html" style="display: none;"></iframe>
    
    <!-- Include Web3.js -->
    <script src="https://cdn.jsdelivr.net/npm/web3@1.8.2/dist/web3.min.js"></script>
    
    <!-- Include i18n -->
    <script src="../../i18n/i18n.js"></script>
    <script src="../../i18n/locales/zh_tw.js"></script>
    <script src="../../i18n/locales/en.js"></script>
    <script src="../../i18n/locales/es.js"></script>
    <script src="../../i18n/locales/ko.js"></script>
    <script src="../../i18n/locales/ja.js"></script>
    <!-- Include contract addresses and ABI -->
    <script src="../../scripts/contracts/contractAddresses.js"></script>
    <script src="../../scripts/contracts/ABI/NFTManagerABI.js"></script>
    <script src="../../scripts/contracts/ABI/PwNFTABI.js"></script>
    <script src="../../scripts/contracts/ABI/GENERIC_ERC20_ABI.js"></script>
    <script src="../../scripts/contracts/ABI/NFTFeedingManagerABI.js"></script>
    
    <!-- Include contract management module -->
    <script src="../../scripts/other/ContractApprovalManager.js"></script>
    <script src="../../scripts/contracts/NFTFeedingManager.js"></script>
    
    <!-- Include contract initialization scripts -->
    <script src="../../scripts/init_contracts/initPwNFT.js"></script>
    <script src="../../scripts/init_contracts/initNFTManager.js"></script>
    <script src="../../scripts/init_contracts/initNFTFeedingManager.js"></script>
    
    <!-- Include PetNFTService -->
    <script src="../../scripts/other/petNFTService.js"></script>
    
    <!-- Include card component -->
    <script src="../../scripts/other/petCard.js"></script>
    
    <!-- Include feed friend dialog -->
    <script src="../../scripts/other/feedFriendDialog.js"></script>
    
    <!-- Add wallet header script -->
    <script src="../../scripts/common/walletHeader.js"></script>
    
    <!-- Add common footer script -->
    <script src="../../scripts/common/footer.js"></script>
    
    <!-- Main page script -->
    <script src="../../scripts/simplePages/pets.js"></script>
    
    <!-- Initialize wallet header -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize wallet header
            window.WalletHeader.init();
            
            // Initialize common footer
            window.CommonFooter.init();
            
            // Listen for wallet connection event
            window.addEventListener('wallet.walletConnected', function(event) {
                console.log('Wallet connected:', event.detail);
                // If loadUserNFTs function exists, load user's NFTs
                if (typeof loadUserNFTs === 'function' && event.detail.address) {
                    loadUserNFTs(event.detail.address);
                }
            });
            
            // Listen for wallet disconnection event
            window.addEventListener('wallet.walletDisconnected', function(event) {
                console.log('Wallet disconnected');
                // Show no wallet message
                if (typeof showNoNFTsMessage === 'function') {
                    showNoNFTsMessage();
                }
            });
            
            // Listen for Web3 ready event
            window.addEventListener('wallet.web3Ready', function(event) {
                console.log('Web3 ready:', event.detail);
                // Initialize contracts
                if (typeof initContracts === 'function') {
                    initContracts();
                }
            });
        });
    </script>
</body>
</html> 